From c83feba6c1d6863f639d564e5ad4278631b5c0cc Mon Sep 17 00:00:00 2001
From: "Mao, Marc" <marc.mao@intel.com>
Date: Wed, 8 Sep 2021 13:43:34 +0800
Subject: [PATCH] Enable xmlconfig for Android

Signed-off-by: Mao, Marc <marc.mao@intel.com>
Change-Id: I399376b74199983eb85a4b69f9281011ade23712
---
 src/util/xmlconfig.c | 7 +++++++
 src/util/xmlconfig.h | 2 +-
 2 files changed, 8 insertions(+), 1 deletion(-)

diff --git a/src/util/xmlconfig.c b/src/util/xmlconfig.c
index a824f2f1a87..f9fe8ff9f7f 100644
--- a/src/util/xmlconfig.c
+++ b/src/util/xmlconfig.c
@@ -1160,9 +1160,16 @@ initOptionCache(driOptionCache *cache, const driOptionCache *info)
    }
 }
 
+#if defined(ANDROID)
+#if defined (SYSCONFDIR)
+#undef SYSCONFDIR
+#endif
+#define SYSCONFDIR "/vendor/etc"
+#else
 #ifndef SYSCONFDIR
 #define SYSCONFDIR "/etc"
 #endif
+#endif
 
 #ifndef DATADIR
 #define DATADIR "/usr/share"
diff --git a/src/util/xmlconfig.h b/src/util/xmlconfig.h
index 1b2daf857f5..9e6a2be4187 100644
--- a/src/util/xmlconfig.h
+++ b/src/util/xmlconfig.h
@@ -39,7 +39,7 @@
 extern "C" {
 #endif
 
-#if defined(ANDROID) || defined(_WIN32)
+#if defined(_WIN32)
 #define WITH_XMLCONFIG 0
 #else
 #define WITH_XMLCONFIG 1
-- 
2.33.1

