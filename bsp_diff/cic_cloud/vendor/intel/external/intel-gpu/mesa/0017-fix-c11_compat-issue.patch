From f9ac01da4f592f7ee397342710831b08103413bb Mon Sep 17 00:00:00 2001
From: "Chen, Yu" <yu.y.chen@intel.com>
Date: Sat, 22 Oct 2022 20:47:21 +0800
Subject: [PATCH] fix c11_compat issue

Signed-off-by: Chen, Yu <yu.y.chen@intel.com>
Change-Id: Ibb5309c323a60ebe8549292107845182a462bb28
---
 include/c11_compat.h | 27 +++++++++++++++++++++++++++
 src/util/macros.h    |  1 +
 2 files changed, 28 insertions(+)
 create mode 100644 include/c11_compat.h

diff --git a/include/c11_compat.h b/include/c11_compat.h
new file mode 100644
index 00000000000..d35740f47a4
--- /dev/null
+++ b/include/c11_compat.h
@@ -0,0 +1,27 @@
+/* Copyright 2019 Intel Corporation */
+/* SPDX-License-Identifier: MIT */
+
+#include "no_extern_c.h"
+
+#ifndef _C11_COMPAT_H_
+#define _C11_COMPAT_H_
+
+#if defined(__cplusplus)
+   /* This is C++ code, not C */
+#elif (__STDC_VERSION__ >= 201112L)
+   /* Already C11 */
+#else
+
+
+/*
+ * C11 static_assert() macro
+ * assert.h only defines that name for C11 and above
+ */
+#ifndef static_assert
+#define static_assert _Static_assert
+#endif
+
+
+#endif /* !C++ && !C11 */
+
+#endif /* _C11_COMPAT_H_ */
diff --git a/src/util/macros.h b/src/util/macros.h
index 4175a795a8f..fa3e100e0f8 100644
--- a/src/util/macros.h
+++ b/src/util/macros.h
@@ -28,6 +28,7 @@
 #include <stddef.h>
 #include <stdint.h>
 #include <stdio.h>
+#include "c11_compat.h"
 
 /* Compute the size of an array */
 #ifndef ARRAY_SIZE
-- 
2.33.1

