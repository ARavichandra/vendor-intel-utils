From 2606e0e979963c0ca45b790f1cbeb44a415bce62 Mon Sep 17 00:00:00 2001
From: yuchen5 <yu.y.chen@intel.com>
Date: Wed, 26 Jan 2022 10:48:40 +0800
Subject: [PATCH] fix build error

1. add libexpat
2. fix implicit declaraton of drmGetDeviceFromDevId

Signed-off-by: yuchen5 <yu.y.chen@intel.com>
Change-Id: I66e938de5d44e9d16e6e2fdcfe27f19c4f8f3766
---
 src/loader/loader.c  | 1 +
 src/util/meson.build | 1 +
 2 files changed, 2 insertions(+)

diff --git a/src/loader/loader.c b/src/loader/loader.c
index c9a499c6fc2..c6f92fb955e 100644
--- a/src/loader/loader.c
+++ b/src/loader/loader.c
@@ -67,6 +67,7 @@
 #ifndef PATH_MAX
 #define PATH_MAX 4096
 #endif
+extern int drmGetDeviceFromDevId(dev_t dev_id, uint32_t flags, drmDevicePtr *device);
 
 static void default_logger(int level, const char *fmt, ...)
 {
diff --git a/src/util/meson.build b/src/util/meson.build
index 1b9c68f519b..d28bde4a0d0 100644
--- a/src/util/meson.build
+++ b/src/util/meson.build
@@ -271,6 +271,7 @@ if not (with_platform_android or with_platform_windows)
   xmlconfig_deps += dep_expat
 endif
 xmlconfig_deps += dep_regex
+xmlconfig_deps += dep_expat
 
 _libxmlconfig = static_library(
   'xmlconfig',
-- 
2.33.1

